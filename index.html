<!DOCTYPE html>
<html>
	<head>
		<style type="text/css">
		.content{
			position: relative;

		}

		.item{
			position: absolute;
			width: 200px;
			margin-right: 10px;
			margin-top: 10px;
			transition: all 1s;
		}

		.h1{
			height: 200px;
			background-color: #f4b300;
		}

		.h2{
			height: 300px;
			background-color: #691BB8;
		}

		.h3{
			height: 400px;
			background-color: #006ac1;
		}

		</style>
        	</head>
	<body>
		<div class="content">
			<div class="item h1">
				1
			</div>
			<div class="item h3">
				2
			</div>
			<div class="item h2">
				3
			</div>
			<div class="item h1">
				4
			</div>
			<div class="item h1">
				5
			</div>
			<div class="item h3">
				6
			</div>
			<div class="item h3">
				7
			</div>
 				<div class="item h2">
				8
			</div>
    	<div class="item h1">
				9
			</div>
			<div class="item h3">
				10
			</div>
			<div class="item h3">
				11
			</div>
			<div class="item h3">
				12
			</div>
			<div class="item h2">
				13
			</div>
			<div class="item h2">
				14
			</div>
			<div class="item h3">
				15
			</div>
			<div class="item h3">
				16
			</div>
			<div class="item h2">
                17
		</div>
    </body>
    <script src = 'https://cdn.bootcss.com/jquery/3.2.1/jquery.js'></script>
    <script>
    

    var WaterFall = (function(){
        function init(){
            waterfall();
            $(window).on('resize', function(){
              waterfall();
            })
        }

    function waterfall(){
        var $item = $('.item');
        var cols = parseInt($('.content').width()/$item.outerHeight(true));//获取列数
        var heightArr = []; //将每个div的高度存入heightArr这个数组中
        for( var i = 0; i < cols; i++){
            heightArr[i] = 0; //初始化数组中数据，将其全部置为0
        }
        $item.each(function(){
                var minHeight = Math.min.apply(null, heightArr);//得到最小高度具体值
                var minHeightIndex = heightArr.indexOf(minHeight);//最小高度的div在数组中的位置

                console.log(heightArr);
                $(this).css({
                    top: minHeight,
                    left: minHeightIndex * $item.eq(0).outerWidth(true) //将div进行拼接起来
                })
                heightArr[minHeightIndex] += $(this).outerHeight(true);//更新最小高度，因为每次都有一个div添加在末尾，存入数组中 
        })
    }

        return {
            init: init
        }
    })()

    WaterFall.init()
    </script>
</html>